#!/bin/bash

# homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# xcode commandline tools
xcode-select --install

# brew packages
brew install \
    git\
    gcc\
    ack\
    vim\
    fzf\
    skhd\
    rustup\
    raylib\
    lolcat\
    figlet\
    ffmpeg\
    openjdk\
    util-linux\
    python@3.10
# have to be seperate or don't install correctly
# brew casks
brew install \
    iterm2\
    dropbox\
    spotify\
    discord\
    visual-studio-code

# set git preferences
git config --global user.email "shanemcdman@gmail.com"
git config --global user.name "Shane McDonough"

# link gcc-11 to gcc
sudo ln -s `where gcc-11` /usr/local/bin/gcc

# install rust without messing with path
rustup-init --no-modify-path -y

# clone dotfiles
git clone git@github.com:KermitPurple/dotfiles.git $HOME/dotfiles

# create symbolic links
ln -s $HOME/dotfiles/vim $HOME/.vim
ln -s $HOME/dotfiles/zsh/zshrc $HOME/.zshrc
ln -s $HOME/dotfiles/zsh/zshenv $HOME/.zshenv
ln -s $HOME/dotfiles/skhd/skhdrc $HOME/.skhdrc
ln -s $HOME/dotfiles/nvim/ $HOME/.config/nvim

# make vim trash files
mkdir $HOME/dotfiles/vim/trash $HOME/dotfiles/vim/views

# install vim plugins
vim -c "PlugInstall" \
    -c "qa!"
$HOME/dotfiles/vim/plugged/YouCompleteMe/install.py --all

pip3 install virtualenv

# reinstall script requirements
. ~/.zshenv
$HOME/dotfiles/clone_reqs
